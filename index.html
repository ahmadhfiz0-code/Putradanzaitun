<!doctype html>
<html lang="id" class="h-full">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Undangan Pernikahan</title>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="/_sdk/data_sdk.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Poppins:wght@300;400;500;600;700&family=Montserrat:wght@300;400;500;600&family=Allura&family=Playfair+Display:wght@400;500;600;700&family=Amiri:wght@400;700&family=Lateef:wght@300;400&display=swap" rel="stylesheet">
  <style>
    /* Semua style sebelumnya tetap dipertahankan */
    body { box-sizing: border-box; }
    .font-vibes { font-family: 'Great Vibes', cursive; }
    .font-cormorant { font-family: 'Allura', cursive; }
    .font-montserrat { font-family: 'Montserrat', sans-serif; }
    .font-header { font-family: 'Playfair Display', serif; }
    .font-arabic { font-family: 'Amiri', serif; }
    .font-arabic-alt { font-family: 'Lateef', serif; }
    
    /* Animations (semua animasi sebelumnya tetap) */
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    @keyframes slideDown { from { opacity: 0; transform: translateY(-50px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes slideUp { from { opacity: 0; transform: translateY(50px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes scaleIn { from { opacity: 0; transform: scale(0.8); } to { opacity: 1; transform: scale(1); } }
    @keyframes float { 0%, 100% { transform: translateY(0px); } 50% { transform: translateY(-20px); } }
    @keyframes particleFloat { 0% { opacity: 0; transform: translate(0, 0) scale(0); } 10% { opacity: 1; } 90% { opacity: 1; } 100% { opacity: 0; transform: translate(var(--tx), var(--ty)) scale(1); } }
    @keyframes rotate { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
    @keyframes scrollDot { 0%, 100% { transform: translateY(0); opacity: 1; } 50% { transform: translateY(12px); opacity: 0.3; } }
    @keyframes floatBubble { 0% { transform: translateY(100vh) translateX(0) scale(0.5); opacity: 0; } 10% { opacity: 1; } 85% { opacity: 1; } 100% { transform: translateY(-150vh) translateX(var(--drift)) scale(1); opacity: 0; } }
    @keyframes swayBubble { 0%, 100% { transform: translateX(0) rotate(0deg); } 25% { transform: translateX(20px) rotate(5deg); } 50% { transform: translateX(0) rotate(0deg); } 75% { transform: translateX(-20px) rotate(-5deg); } }
    @keyframes rotateBubble { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
    @keyframes floatGently { 0%, 100% { transform: translateY(0) rotate(0deg); } 50% { transform: translateY(-15px) rotate(5deg); } }
    @keyframes flowerFadeIn { from { opacity: 0; transform: translateX(-30px) scale(0.8); } to { opacity: 1; transform: translateX(0) scale(1); } }
    @keyframes flowerFadeInRight { from { opacity: 0; transform: translateX(30px) scale(0.8); } to { opacity: 1; transform: translateX(0) scale(1); } }
    @keyframes flowerFadeOut { from { opacity: 1; transform: translateX(0) scale(1); } to { opacity: 0; transform: translateX(-30px) scale(0.8); } }
    @keyframes flowerFadeOutRight { from { opacity: 1; transform: translateX(0) scale(1); } to { opacity: 0; transform: translateX(30px) scale(0.8); } }
    @keyframes glow { 0%, 100% { box-shadow: 0 0 8px rgba(255, 255, 255, 0.2), 0 0 15px rgba(255, 255, 255, 0.1); } 50% { box-shadow: 0 0 12px rgba(255, 255, 255, 0.3), 0 0 20px rgba(255, 255, 255, 0.15); } }
    @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
    
    .animate-scroll-dot { animation: scrollDot 2.5s ease-in-out infinite; }
    .animate-fadeIn { animation: fadeIn 1.2s ease-out; }
    .animate-slideDown { animation: slideDown 1s ease-out; }
    .animate-slideUp { animation: slideUp 1s ease-out; }
    .animate-scaleIn { animation: scaleIn 0.8s ease-out; }
    .animate-float { animation: float 3s ease-in-out infinite; }
    
    .bubble-image {
      position: fixed;
      width: 70px;
      height: 70px;
      pointer-events: none;
      z-index: 9999;
      bottom: -100px;
      animation: floatBubble var(--duration) ease-in-out infinite;
      animation-delay: var(--delay);
      filter: drop-shadow(0 4px 8px rgba(255,255,255,0.4));
      display: none;
    }
    
    .bubble-image.active { display: block; }
    .bubble-image img {
      width: 100%;
      height: 100%;
      object-fit: contain;
      animation: swayBubble var(--sway-duration) ease-in-out infinite, rotateBubble var(--rotate-duration) linear infinite;
      animation-delay: var(--sway-delay), var(--rotate-delay);
    }
    
    .flower-decoration {
      position: absolute;
      width: 120px;
      height: 120px;
      pointer-events: none;
      z-index: 5;
    }
    
    .flower-decoration.left { animation: floatGently 4s ease-in-out infinite, flowerFadeIn 1s ease-out; }
    .flower-decoration.right { animation: floatGently 4s ease-in-out infinite, flowerFadeInRight 1s ease-out; }
    .flower-decoration.left.fade-out { animation: flowerFadeOut 0.8s ease-out forwards; }
    .flower-decoration.right.fade-out { animation: flowerFadeOutRight 0.8s ease-out forwards; }
    .flower-decoration img { width: 100%; height: 100%; object-fit: cover; }
    
    .flower-decoration.top-left { top: 30px; left: -60px; }
    .flower-decoration.bottom-left { bottom: 30px; left: -60px; }
    .flower-decoration.top-right { top: 30px; right: -60px; }
    .flower-decoration.bottom-right { bottom: 30px; right: -60px; }
    
    .content-container { position: relative; z-index: 10; }
    
    .scroll-reveal {
      opacity: 0;
      transform: translateY(30px);
      transition: opacity 0.8s ease-out, transform 0.8s ease-out;
    }
    
    .scroll-reveal.visible { opacity: 1; transform: translateY(0); }
    .scroll-reveal.hidden-up { opacity: 0; transform: translateY(-30px); }
    
    .scroll-fade {
      opacity: 0;
      transition: opacity 0.8s ease-out;
    }
    
    .scroll-fade.visible { opacity: 1; }
    .scroll-fade.hidden-up { opacity: 0; }
    
    .particle {
      position: absolute;
      width: 8px;
      height: 8px;
      background: radial-gradient(circle, rgba(255,255,255,0.8), transparent);
      border-radius: 50%;
      pointer-events: none;
      animation: particleFloat 3s ease-out forwards;
    }
    
    .overlay-pattern {
      background-image: radial-gradient(circle at 20% 50%, rgba(255,255,255,0.1) 0%, transparent 50%),
                        radial-gradient(circle at 80% 80%, rgba(255,255,255,0.1) 0%, transparent 50%);
    }
    
    .section-divider {
      height: 2px;
      background: linear-gradient(to right, transparent, currentColor, transparent);
      opacity: 0.3;
    }
    
    .hover-lift {
      transition: all 0.3s ease;
    }
    
    .hover-lift:hover {
      transform: translateY(-8px);
      box-shadow: 0 20px 40px rgba(0,0,0,0.15);
    }
    
    .music-btn {
      position: fixed;
      bottom: 80px;
      right: 24px;
      z-index: 1000;
      transition: all 0.3s ease;
      box-shadow: 0 0 8px rgba(255, 255, 255, 0.2), 0 0 15px rgba(255, 255, 255, 0.1);
      animation: glow 2s ease-in-out infinite;
    }
    
    .music-btn:hover { transform: scale(1.1); }
    .music-btn.playing { animation: spin 3s linear infinite, glow 2s ease-in-out infinite; }
    
    .modal-backdrop { backdrop-filter: blur(8px); }
    .cover-ornament { animation: rotate 30s linear infinite; }
    
    .bg-pattern {
      background-image: url('https://raw.githubusercontent.com/ahmadhfiz0-code/Background/main/file_000000003c0c72069a2988044f28e7cd.png');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      background-attachment: fixed;
    }
    
    body, html {
      background-image: url('https://raw.githubusercontent.com/ahmadhfiz0-code/Background/main/file_000000003c0c72069a2988044f28e7cd.png');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      background-attachment: fixed;
    }
    
    /* Gaya khusus untuk teks Arab */
    .arabic-container {
      background: linear-gradient(135deg, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0.02) 100%);
      border: 1px solid rgba(255, 255, 255, 0.08);
      backdrop-filter: blur(10px);
      border-radius: 1.5rem;
      padding: 2.5rem 2rem;
      margin: 3rem auto;
      max-width: 800px;
      position: relative;
      overflow: hidden;
    }
    
    .arabic-container::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 1px;
      background: linear-gradient(to right, transparent, rgba(255,255,255,0.3), transparent);
    }
    
    .arabic-container::after {
      content: "";
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 1px;
      background: linear-gradient(to right, transparent, rgba(255,255,255,0.3), transparent);
    }
    
    .arabic-verse {
      font-family: 'Amiri', serif;
      font-size: 2.2rem;
      line-height: 1.8;
      text-align: right;
      color: #f8f9fa;
      margin-bottom: 1.5rem;
      text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
      letter-spacing: 0;
      word-spacing: 0.3em;
    }
    
    .arabic-translation {
      font-family: 'Poppins', sans-serif;
      font-size: 1rem;
      line-height: 1.7;
      color: rgba(227, 242, 253, 0.9);
      text-align: center;
      padding-top: 1.5rem;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      font-style: italic;
    }
    
    .surah-reference {
      font-family: 'Montserrat', sans-serif;
      font-size: 0.9rem;
      color: rgba(79, 195, 247, 0.9);
      text-align: center;
      margin-top: 0.5rem;
      font-weight: 500;
    }
    
    .ayat-decoration {
      position: absolute;
      font-family: 'Lateef', serif;
      color: rgba(255, 255, 255, 0.03);
      font-size: 8rem;
      z-index: -1;
      user-select: none;
      pointer-events: none;
    }
    
    .ayat-decoration.left {
      left: -40px;
      top: 50%;
      transform: translateY(-50%) rotate(-15deg);
    }
    
    .ayat-decoration.right {
      right: -40px;
      top: 50%;
      transform: translateY(-50%) rotate(15deg);
    }
    
    @media (max-width: 768px) {
      .arabic-verse {
        font-size: 1.8rem;
        line-height: 1.7;
      }
      
      .arabic-container {
        padding: 2rem 1.5rem;
        margin: 2rem auto;
      }
      
      .ayat-decoration {
        font-size: 5rem;
      }
      
      .ayat-decoration.left {
        left: -20px;
      }
      
      .ayat-decoration.right {
        right: -20px;
      }
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
</head>
<body class="h-full overflow-hidden">
  <div id="app" class="w-full h-full">
    <!-- Container untuk ayat Arab akan ditempatkan di sini oleh JavaScript -->
    <!-- Template akan menggunakan elemen dengan ID 'arabic-verse-container' -->
  </div>
  
  <script>
    const defaultConfig = {
      background_color: "#0a1929",
      surface_color: "#1a2f42",
      text_color: "#e3f2fd",
      primary_action_color: "#4fc3f7",
      secondary_action_color: "#0277bd",
      font_family: "Poppins",
      font_size: 16,
      bride_name: "Zaitun",
      bride_nickname: "Zaitun",
      bride_parents: "Bapak Topan S.Jambu & Ibu Sari S. Taro",
      bride_child: "Putri dari",
      groom_name: "Putra",
      groom_nickname: "Putra",
      groom_parents: "Bapak Fushan S. Sirsak & Ibu Darian S. Melon",
      groom_child: "Putra dari",
      akad_date: "Selasa, 13 Januari 2026",
      akad_time: "09.00 - 10.00 WITA",
      resepsi_date: "Jumat, 16 Januari 2026",
      resepsi_time: "09.00 - 11.00 WITA",
      venue_name: "Masjid Agung Al Karomah Martapura",
      venue_address: "Masjid Agung Al Karomah, Martapura",
      maps_url: "https://maps.app.goo.gl/fcViRGUdSdgcz7cUA",
      venue_name_resepsi: "Mesjid Raya Sabilul Muhtadin Banjarmasin",
      venue_address_resepsi: "Mesjid Raya Sabilul Muhtadin, Banjarmasin",
      maps_url_resepsi: "https://maps.app.goo.gl/tMiYQFgkuj7srG1a8",
      guest_name: "Bapak H. Ultraman",
      rekening_pria: "987654331",
      rekening_wanita: "1122334455",
      instagram_bride: "https://www.instagram.com/myundangan.in?igsh=czF3amN1bHEzM3I5",
      instagram_groom: "https://www.instagram.com/myundangan.in?igsh=czF3amN1bHEzM3I5",
      instagram_url: "https://www.instagram.com/myundangan.in?igsh=ejZvb2UxdmV0cWx4",
      closing_message: "Merupakan suatu kebahagiaan bagi kami apabila Bapak/Ibu/Saudara/i berkenan hadir untuk memberikan doa restu kepada kami.",
      
      // AYAT ARAB YANG DIPERBAIKI
      ayat_arabic: "وَمِنْ آيَاتِهِ أَنْ خَلَقَ لَكُم مِّنْ أَنفُسِكُمْ أَزْوَاجًا لِّتَسْكُنُوا إِلَيْهَا وَجَعَلَ بَيْنَكُم مَّوَدَّةً وَرَحْمَةً ۚ إِنَّ فِي ذَٰلِكَ لَآيَاتٍ لِّقَوْمٍ يَتَفَكَّرُونَ",
      ayat_translation: "Dan di antara tanda-tanda kekuasaan-Nya ialah Dia menciptakan untukmu pasangan hidup dari jenismu sendiri, supaya kamu merasa tenang kepadanya, dan dijadikan-Nya rasa kasih dan sayang di antara kamu. Sesungguhnya pada yang demikian itu benar-benar terdapat tanda-tanda (kebesaran Allah) bagi kaum yang berpikir.",
      ayat_reference: "QS. Ar-Rum (30): 21"
    };

    // Template untuk ayat Arab
    const arabicVerseTemplate = `
      <div class="arabic-container scroll-reveal animate-scaleIn">
        <div class="ayat-decoration left">﷽</div>
        <div class="ayat-decoration right">﷽</div>
        
        <p class="arabic-verse">
          وَمِنْ آيَاتِهِ أَنْ خَلَقَ لَكُم مِّنْ أَنفُسِكُمْ أَزْوَاجًا لِّتَسْكُنُوا إِلَيْهَا وَجَعَلَ بَيْنَكُم مَّوَدَّةً وَرَحْمَةً ۚ إِنَّ فِي ذَٰلِكَ لَآيَاتٍ لِّقَوْمٍ يَتَفَكَّرُونَ
        </p>
        
        <p class="arabic-translation">
          "Dan di antara tanda-tanda kekuasaan-Nya ialah Dia menciptakan untukmu pasangan hidup dari jenismu sendiri, supaya kamu merasa tenang kepadanya, dan dijadikan-Nya rasa kasih dan sayang di antara kamu. Sesungguhnya pada yang demikian itu benar-benar terdapat tanda-tanda (kebesaran Allah) bagi kaum yang berpikir."
        </p>
        
        <p class="surah-reference">
          QS. Ar-Rum (30): 21
        </p>
      </div>
    `;

    // Fungsi untuk menambahkan ayat Arab ke dalam undangan
    function addArabicVerse() {
      const appElement = document.getElementById('app');
      
      if (appElement) {
        // Cari elemen yang sesuai untuk menempatkan ayat Arab
        // Biasanya sebelum bagian penutup (closing message)
        const closingSection = appElement.querySelector('[data-section="closing"]') || 
                               appElement.querySelector('.closing-section') ||
                               appElement.querySelector('.message-container');
        
        if (closingSection) {
          // Buat container untuk ayat Arab
          const verseContainer = document.createElement('div');
          verseContainer.innerHTML = arabicVerseTemplate;
          
          // Sisipkan sebelum bagian penutup
          closingSection.parentNode.insertBefore(verseContainer, closingSection);
        } else {
          // Jika tidak menemukan bagian penutup, tambahkan di akhir
          const verseContainer = document.createElement('div');
          verseContainer.innerHTML = arabicVerseTemplate;
          appElement.appendChild(verseContainer);
        }
        
        // Aktifkan animasi scroll reveal
        setTimeout(() => {
          const verseElement = document.querySelector('.arabic-container');
          if (verseElement) {
            verseElement.classList.add('visible');
          }
        }, 500);
      }
    }

    // Variabel global lainnya
    let isOpened = false;
    let countdownInterval = null;
    let musicPlaying = false;
    let animationShown = false;
    let ayatAudioPlaying = false;
    let comments = [];
    let commentsVisible = false;
    let isSubmitting = false;
    let autoScrollInterval = null;
    let isAutoScrolling = false;

    // Data SDK Handler
    const dataHandler = {
      onDataChanged(data) {
        comments = data.sort((a, b) => {
          const dateA = new Date(b.timestamp);
          const dateB = new Date(a.timestamp);
          return dateA - dateB;
        });

        const commentCount = document.getElementById('commentCount');
        if (commentCount) {
          commentCount.textContent = comments.length;
        }

        if (commentsVisible) {
          // Update tampilan komentar jika diperlukan
        }
      }
    };

    // Inisialisasi setelah DOM siap
    document.addEventListener('DOMContentLoaded', function() {
      // Tambahkan ayat Arab ke undangan
      setTimeout(addArabicVerse, 1000);
      
      // Kode inisialisasi lainnya tetap di sini
      // ...
    });

    // Jika menggunakan sistem template dengan placeholder
    function renderTemplate() {
      // Fungsi render template Anda
      // Pastikan untuk menyertakan ayat Arab dalam template
    }
  </script>
</body>
</html>
